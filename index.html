<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Ujian Pilihan Ganda</title>
  <script type="module">
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // Konfigurasi Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAYNFwQxkIXvW9Z-uGWl8N4zhe2MJoBjfY",
      authDomain: "soal-grecia.firebaseapp.com",
      projectId: "soal-grecia",
      storageBucket: "soal-grecia.firebasestorage.app",
      messagingSenderId: "301760637420",
      appId: "1:301760637420:web:d6aebf003c50c6cd1bf8c9",
      measurementId: "G-JCY3EZE06C"
    };

    // Init Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Submit jawaban
    async function submitUjian(e) {
      e.preventDefault();

      // Ambil data peserta
      const nama = document.getElementById("nama").value;
      const status = document.getElementById("status").value;
      const alamat = document.getElementById("alamat").value;

      // Ambil jawaban soal
      const jawaban1 = document.querySelector('input[name="soal1"]:checked')?.value || "";
      const jawaban2 = document.querySelector('input[name="soal2"]:checked')?.value || "";
      const jawaban3 = document.querySelector('input[name="soal3"]:checked')?.value || "";

      try {
        await addDoc(collection(db, "jawaban"), {
          nama: nama,
          status: status,
          alamat: alamat,
          jawaban: {
            soal1: jawaban1,
            soal2: jawaban2,
            soal3: jawaban3
          },
          waktu: new Date()
        });
        alert("Jawaban berhasil disimpan!");
        document.getElementById("formUjian").reset();
      } catch (err) {
        console.error("Gagal simpan jawaban: ", err);
        alert("Terjadi error, coba lagi.");
      }
    }

    window.submitUjian = submitUjian;
  </script>
</head>
<body>
  <h2>Ujian Pilihan Ganda</h2>
  <form id="formUjian" onsubmit="submitUjian(event)">
    <label>Nama Peserta:</label><br>
    <input type="text" id="nama" required><br><br>

    <label>Status:</label><br>
    <select id="status" required>
      <option value="">-- Pilih Status --</option>
      <option value="Reseller">Reseller</option>
      <option value="Distributor">Distributor</option>
    </select><br><br>

    <label>Alamat:</label><br>
    <textarea id="alamat" rows="3" required></textarea><br><br>

    <hr>
    <p>1. Ibukota Indonesia adalah?</p>
    <input type="radio" name="soal1" value="Jakarta"> Jakarta<br>
    <input type="radio" name="soal1" value="Bandung"> Bandung<br>
    <input type="radio" name="soal1" value="Surabaya"> Surabaya<br><br>

    <p>2. 2 + 2 = ?</p>
    <input type="radio" name="soal2" value="3"> 3<br>
    <input type="radio" name="soal2" value="4"> 4<br>
    <input type="radio" name="soal2" value="5"> 5<br><br>

    <p>3. Hewan pemakan rumput disebut?</p>
    <input type="radio" name="soal3" value="Herbivora"> Herbivora<br>
    <input type="radio" name="soal3" value="Karnivora"> Karnivora<br>
    <input type="radio" name="soal3" value="Omnivora"> Omnivora<br><br>

    <button type="submit">Kirim Jawaban</button>
  </form>
</body>
</html>
